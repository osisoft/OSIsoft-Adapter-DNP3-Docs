<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>System components configuration </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="System components configuration ">
    <meta name="generator" content="docfx 2.56.5.0">
    
    <link rel="shortcut icon" href="../../../../favicon.ico">
    <link rel="stylesheet" href="../../../../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../../../../styles/docfx.css">
    <link rel="stylesheet" href="../../../../styles/main.css">
    <meta property="docfx:navrel" content="../../../../toc.html">
    <meta property="docfx:tocrel" content="../../../toc.html">
    
    <meta property="docfx:rel" content="../../../../">
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../../../../content/index.html" width="46">
                <img id="logo" src="../../../../content/main/shared-content/images/atlas_icon.png" height="46" width="46" alt="OSIsoft Edge System"> 
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div class="container body-content">
        
        <div id="search-results">
          <div class="search-list"></div>
          <div class="sr-items">
            <p><i class="glyphicon glyphicon-refresh index-loading"></i></p>
          </div>
          <ul id="pagination"></ul>
        </div>
      </div>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="SystemComponentsConfiguration">
<h1 id="system-components-configuration">System components configuration</h1>

<p>PI adapters use JSON configuration files in a protected directory on Windows and Linux to store configuration that is read on startup. While the files are accessible to view, OSIsoft recommends that you use REST or the EdgeCmd utility for any changes you make to the files.</p>
<p>As part of making adapters as secure as possible, any passwords or secrets that you configure are stored in encrypted form where cryptographic key material is stored separately in a secure location. If you edit the files directly, the adapter may not work as expected.</p>
<p><strong>Note:</strong> You can edit any single component or facet of the system individually using REST, but you can also configure the system as a whole with a single REST call.</p>
<h2 id="configure-system-components">Configure system components</h2>
<p>Complete the following steps to configure system components. Use the <code>PUT</code> method in conjunction with the <code>http://localhost:5590/api/v1/configuration/system/components</code> REST endpoint to initialize the configuration.</p>
<ol>
<li><p>Using a text editor, create an empty text file.</p>
</li>
<li><p>Copy and paste an example configuration for system components into the file.</p>
<p> For sample JSON, see <a href="#examples">Examples</a>.</p>
</li>
<li><p>Update the example JSON parameters for your environment.</p>
<p> For a table of all available parameters, see <a href="#system-components-parameters">System components parameters</a>.</p>
</li>
<li><p>Save the file. For example, as <code>ConfigureComponents.json</code>.</p>
</li>
<li><p>Open a command line session. Change directory to the location of <code>ConfigureComponents.json</code>.</p>
</li>
<li><p>Enter the following cURL command (which uses the <code>PUT</code> method) to initialize the system components configuration.</p>
<pre><code class="lang-bash">curl -d &quot;@ConfigureComponents.json&quot; -H &quot;Content-Type: application/json&quot; -X PUT &quot;http://localhost:5590/api/v1/configuration/system/components&quot;
</code></pre><p> <strong>Notes:</strong></p>
<ul>
<li>If you installed the adapter to listen on a non-default port, update <code>5590</code> to the port number in use.</li>
<li>For a list of other REST operations you can perform, like updating or deleting a system components configuration, see <a href="#rest-urls">REST URLs</a>.
<br>
<br></li>
</ul>
</li>
</ol>
<h2 id="system-components-schema">System components schema</h2>
<p>The full schema definition for the system components configuration is in the <code>System_Components_schema.json</code> file located in one of the following folders:</p>
<p>Windows: <code>%ProgramFiles%\OSIsoft\Adapters\AdapterName\Schemas</code></p>
<p>Linux: <code>/opt/OSIsoft/Adapters/AdapterName/Schemas</code></p>
<h2 id="system-components-parameters">System components parameters</h2>
<p>You can configure the following parameters for system components:</p>
<table>
<thead>
<tr>
<th>Parameters</th>
<th>Required</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>ComponentId</strong></td>
<td>Required</td>
<td><code>string</code></td>
<td>The ID of the component<sup>1</sup>. It can be any alphanumeric string. A properly configured ComponentID follows these rules:<br>Cannot contain leading or trailing space <br> Cannot use the following characters:<br> <code>&gt;</code> <code>&lt;</code> <code>/</code> <code>:</code> <code>?</code> <code>#</code> <code>[</code> <code>]</code> <code>@</code> <code>!</code> <code>$</code> <code>&amp;</code> <code>*</code> <code>\</code> <code>&quot;</code> <code>(</code> <code>)</code> <code>\\</code> <code>+</code> <code>,</code> <code>;</code> <code>=</code> <code>\|</code> <code>` </code> <code>{</code> <code>}</code></td>
</tr>
<tr>
<td><strong>ComponentType</strong></td>
<td>Required</td>
<td><code>string</code></td>
<td>The type of the component. There are two types of components: OmfEgress and the adapter.<sup>1</sup></td>
</tr>
</tbody>
</table>
<p><sup>1</sup><strong>Note:</strong> The OmfEgress component is required to run the adapter. Both its <strong>ComponentId</strong> and <strong>ComponentType</strong> are reserved and should not be modified.</p>
<h2 id="examples">Examples</h2>
<h3 id="default-system-components-configuration">Default system components configuration</h3>
<p>The default <em>System_Components.json</em> file for the System component contains the following information.</p>
<pre><code class="lang-json">[
  {
    &quot;ComponentId&quot;: &quot;OmfEgress&quot;,
    &quot;ComponentType&quot;: &quot;OmfEgress&quot;
  }
]
</code></pre><h3 id="system-components-configuration-with-two-adapter-instances">System components configuration with two adapter instances</h3>
<pre><code class="lang-json">[
  {
                &quot;ComponentId&quot;: &quot;&lt;AdapterName&gt;1&quot;,
                &quot;ComponentType&quot;: &quot;&lt;AdapterName&gt;&quot;
            },
            {
                &quot;ComponentId&quot;: &quot;&lt;AdapterName&gt;2&quot;,
                &quot;ComponentType&quot;: &quot;&lt;AdapterName&gt;&quot;
            },
            {
                &quot;ComponentId&quot;: &quot;OmfEgress&quot;,
                &quot;ComponentType&quot;: &quot;OmfEgress&quot;
   }
]
</code></pre><h2 id="rest-urls">REST URLs</h2>
<table>
<thead>
<tr>
<th>Relative URL</th>
<th>HTTP verb</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>api/v1/configuration/system/components</td>
<td>GET</td>
<td>Retrieves  the system components configuration</td>
</tr>
<tr>
<td>api/v1/configuration/system/components</td>
<td>POST</td>
<td>Adds a new component to the system configuration</td>
</tr>
<tr>
<td>api/v1/configuration/system/components</td>
<td>PUT</td>
<td>Updates the system components configuration</td>
</tr>
<tr>
<td>api/v1/configuration/system/components/<em>componentId</em></td>
<td>DELETE</td>
<td>Deletes a specific component from the system components configuration<br><strong>Note:</strong> All the logs and configurations files for the deleted components are moved to the corresponding <em>logs/Removed</em> or <em>Configuration/Removed</em> folder.</td>
</tr>
<tr>
<td>api/v1/configuration/system/components/<em>componentId</em></td>
<td>PUT</td>
<td>Creates a new component with the specified <em>componentId</em> in the system configuration</td>
</tr>
</tbody>
</table>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/osisoft/PI-Adapter/blob/main/shared-content/configuration/system-components-configuration.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span><a href="https://www.osisoft.com/copyright/">© 2019 - 2021 OSIsoft, LLC. All rights reserved.</a></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../../../../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../../../../styles/docfx.js"></script>
    <script type="text/javascript" src="../../../../styles/main.js"></script>
  </body>
</html>
